
project openbus/assistant/demos ;

path-constant here : . ;

alias hello-idl : $(here)/idl/hello.idl ;

local all-tests ;
local rule exe-test ( test-name : filename : idl ? )
{
  local test-dependencies = /openbus//openbus
   /mico//mico /scs//scs /boost//headers /logger//logger
   /openbus//core-idls /openssl//openssl
   /openbus/assistant//assistant
  ;
  local test-requirements = <implicit-dependency>/openbus//core-idls
    <threading>multi:<source>/boost//thread <include>tests
    <implicit-dependency>$(idl) <link>static:<source>/dl//dl ;
  exe $(test-name) : $(filename) $(idl) $(test-dependencies)
   : $(test-requirements) ;
  explicit $(test-name) ;
  all-tests += $(test-name) ;
}

exe-test add_offer : add_offer.cpp : hello-idl ;
exe-test create_assistant_with_password : create_assistant_with_password.cpp ;
exe-test create_assistant_with_password_wo_named_parameters : create_assistant_with_password_wo_named_parameters.cpp ;
exe-test create_assistant_with_private_key : create_assistant_with_private_key.cpp ;
exe-test find_service_and_immediate_timeout : find_service_and_immediate_timeout.cpp ;
exe-test find_service_and_never_timeout : find_service_and_never_timeout.cpp ;
exe-test find_service_and_timeout : find_service_and_timeout.cpp ;

alias tests : $(all-tests) ;
explicit tests ;
