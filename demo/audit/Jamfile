project openbus/demo/audit ;

path-constant demo-hello : ../hello ;

obj hello-stub
  : $(demo-hello)/idl/hello.idl
  ;
explicit hello-stub ;

obj hello-skeleton
  : $(demo-hello)/idl/hello.idl
  : <generate>skeleton
  ;
explicit hello-skeleton ;


exe audit_client
 : src/client.cpp
   /openbus//openbus
   /boost//program_options
   /scs//scs
   /boost//headers
   /logger//logger
   /openssl//openssl
   hello-stub
 : <threading>multi:<source>/boost//thread
   <dependency>hello-stub
   <implicit-dependency>hello-stub
   <link>static,<target-os>linux:<source>/dl//dl
   
 ;
explicit audit_client ;

exe audit_server
 : src/server.cpp
   /openbus//openbus
   /boost//program_options
   /scs//scs
   /boost//headers
   /logger//logger
   /openssl//openssl
   hello-stub
   hello-skeleton
 : <threading>multi:<source>/boost//thread
   <dependency>hello-stub
   <implicit-dependency>hello-stub
   <dependency>hello-skeleton
   <implicit-dependency>hello-skeleton
   <link>static,<target-os>linux:<source>/dl//dl   
 ;
explicit audit_server ;

exe audit_proxy
 : src/proxy.cpp
   /openbus//openbus
   /boost//program_options
   /scs//scs
   /boost//headers
   /logger//logger
   /openssl//openssl
   hello-stub
   hello-skeleton
 : <threading>multi:<source>/boost//thread
   <dependency>hello-stub
   <implicit-dependency>hello-stub
   <dependency>hello-skeleton
   <implicit-dependency>hello-skeleton
   <link>static,<target-os>linux:<source>/dl//dl   
 ;
explicit audit_proxy ;

alias audit
  : audit_client
    audit_server
    audit_proxy
  ;
