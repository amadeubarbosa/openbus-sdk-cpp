project openbus/interop/delegation ;

path-constant here : . ;

obj messages-stub
  : $(here)/idl/messages.idl
  ;

obj messages-skeleton
  : $(here)/idl/messages.idl
  : <generate>skeleton
  ;

alias idls
  : messages-stub
    messages-skeleton
  ;
explicit idls ;

exe delegation_client
 : src/client.cpp
   /openbus//openbus
   /boost//program_options
   /scs//scs
   /boost//headers
   /logger//logger
   /openssl//openssl
   idls
 : <threading>multi:<source>/boost//thread
   <dependency>idls
   <implicit-dependency>idls
   <link>static,<target-os>linux:<source>/dl//dl
   
 ;
explicit delegation_client ;

exe delegation_forwarder
 : src/forwarder.cpp
   /openbus//openbus
   /boost//program_options
   /scs//scs
   /boost//headers
   /logger//logger
   /openssl//openssl
   messages-stub
   messages-skeleton
 : <threading>multi:<source>/boost//thread
   <dependency>messages-stub
   <implicit-dependency>messages-stub
   <dependency>messages-skeleton
   <implicit-dependency>messages-skeleton
   <link>static,<target-os>linux:<source>/dl//dl   
 ;
explicit delegation_forwarder ;

exe delegation_broadcaster
 : src/broadcaster.cpp
   /openbus//openbus
   /boost//program_options
   /scs//scs
   /boost//headers
   /logger//logger
   /openssl//openssl
   messages-stub
   messages-skeleton
 : <threading>multi:<source>/boost//thread
   <dependency>messages-stub
   <implicit-dependency>messages-stub
   <dependency>messages-skeleton
   <implicit-dependency>messages-skeleton
   <link>static,<target-os>linux:<source>/dl//dl   
 ;
explicit delegation_broadcaster ;

exe delegation_messenger
 : src/messenger.cpp
   /openbus//openbus
   /boost//program_options
   /scs//scs
   /boost//headers
   /logger//logger
   /openssl//openssl
   messages-stub
   messages-skeleton
 : <threading>multi:<source>/boost//thread
   <dependency>messages-stub
   <implicit-dependency>messages-stub
   <dependency>messages-skeleton
   <implicit-dependency>messages-skeleton
   <link>static,<target-os>linux:<source>/dl//dl   
 ;
explicit delegation_messenger ;

alias delegation
  : delegation_client
    delegation_forwarder
    delegation_broadcaster
    delegation_messenger
  ;
