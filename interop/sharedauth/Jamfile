project openbus/interop/sharedauth ;

path-constant here : . ;

obj hello-stub
  : $(here)/idl/hello/hello.idl
  ;

obj encoding-stub
  : $(here)/idl/sharedauth/encoding.idl
  ;

exe encoding_client
 : src/client.cpp
   /openbus//openbus
   /boost//program_options
   /scs//scs
   /boost//headers
   /logger//logger
   /openssl//openssl
   hello-stub
   encoding-stub
 : <threading>multi:<source>/boost//thread
   <dependency>hello-stub
   <implicit-dependency>hello-stub
   <dependency>encoding-stub
   <implicit-dependency>encoding-stub
   <link>static,<target-os>linux:<source>/dl//dl
   
 ;
explicit encoding_client ;

exe encoding_client-sharedauth
 : src/client-sharedauth.cpp
   /openbus//openbus
   /boost//program_options
   /scs//scs
   /boost//headers
   /logger//logger
   /openssl//openssl
   hello-stub
   encoding-stub
 : <threading>multi:<source>/boost//thread
   <dependency>hello-stub
   <implicit-dependency>hello-stub
   <dependency>encoding-stub
   <implicit-dependency>encoding-stub
   <link>static,<target-os>linux:<source>/dl//dl   
 ;
explicit encoding_client-sharedauth ;

alias encoding
  : encoding_client
    encoding_client-sharedauth
  ;
